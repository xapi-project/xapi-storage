
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>task</title>

    <style media="screen">
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cpf {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s, .highlight .sa, .highlight .dl {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf, .highlight .fm {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv, .highlight .vm {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .nl {
  color: #f92672;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <style media="print">
      * {
        -webkit-transition:none!important;
        transition:none!important;
      }
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #586e75;
}
.highlight .err {
  color: #002b36;
  background-color: #dc322f;
}
.highlight .c, .highlight .ch, .highlight .cd, .highlight .cm, .highlight .cpf, .highlight .c1, .highlight .cs {
  color: #657b83;
}
.highlight .cp {
  color: #b58900;
}
.highlight .nt {
  color: #b58900;
}
.highlight .o, .highlight .ow {
  color: #93a1a1;
}
.highlight .p, .highlight .pi {
  color: #93a1a1;
}
.highlight .gi {
  color: #859900;
}
.highlight .gd {
  color: #dc322f;
}
.highlight .gh {
  color: #268bd2;
  background-color: #002b36;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #6c71c4;
}
.highlight .kc {
  color: #cb4b16;
}
.highlight .kt {
  color: #cb4b16;
}
.highlight .kd {
  color: #cb4b16;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .dl, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #859900;
}
.highlight .sa {
  color: #6c71c4;
}
.highlight .sr {
  color: #2aa198;
}
.highlight .si {
  color: #d33682;
}
.highlight .se {
  color: #d33682;
}
.highlight .nn {
  color: #b58900;
}
.highlight .nc {
  color: #b58900;
}
.highlight .no {
  color: #b58900;
}
.highlight .na {
  color: #268bd2;
}
.highlight .m, .highlight .mb, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mx {
  color: #859900;
}
.highlight .ss {
  color: #859900;
}
    </style>
    <link href="../stylesheets/screen-c9d8fa83.css" rel="stylesheet" media="screen" />
    <link href="../stylesheets/print-953e3353.css" rel="stylesheet" media="print" />
      <script src="../javascripts/all-b12a2749.js"></script>

  </head>

  <body class="includes includes_task" data-languages="[&quot;json&quot;,&quot;ocaml&quot;,&quot;python&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="../images/navbar-cad8cdcb.png" alt="" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="../images/logo-1e815a84.png" class="logo" alt="" />
        <div class="lang-selector">
              <a href="#" data-language-name="json">json</a>
              <a href="#" data-language-name="ocaml">ocaml</a>
              <a href="#" data-language-name="python">python</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#task" class="toc-h1 toc-link" data-title="task">task</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#task-type-definitions" class="toc-h2 toc-link" data-title="Type definitions">Type definitions</a>
                  </li>
                  <li>
                    <a href="#task-interface-task" class="toc-h2 toc-link" data-title="Interface: Task">Interface: <code>Task</code></a>
                  </li>
                  <li>
                    <a href="#task-method-stat" class="toc-h2 toc-link" data-title="Method: stat">Method: <code>stat</code></a>
                  </li>
                  <li>
                    <a href="#task-method-cancel" class="toc-h2 toc-link" data-title="Method: cancel">Method: <code>cancel</code></a>
                  </li>
                  <li>
                    <a href="#task-method-destroy" class="toc-h2 toc-link" data-title="Method: destroy">Method: <code>destroy</code></a>
                  </li>
                  <li>
                    <a href="#task-method-ls" class="toc-h2 toc-link" data-title="Method: ls">Method: <code>ls</code></a>
                  </li>
                  <li>
                    <a href="#task-errors" class="toc-h2 toc-link" data-title="Errors">Errors</a>
                  </li>
              </ul>
          </li>
      </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='task'>task</h1>
<p>The Task interface is required if the backend supports long-running  tasks.</p>
<h2 id='task-type-definitions'>Type definitions</h2><h3 id='task-type-definitions-id'>id</h3><div class="highlight"><pre class="highlight json tab-json"><code><span class="s2">"id"</span><span class="w">
</span></code></pre></div>
<p>type <code>id</code> = <code>string</code>
Unique identifier for a task.</p>
<h3 id='task-type-definitions-volume'>volume</h3><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"keys"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"keys"</span><span class="p">:</span><span class="w"> </span><span class="s2">"keys"</span><span class="w"> </span><span class="p">},</span><span class="w">
  </span><span class="nl">"uri"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">"uri"</span><span class="w"> </span><span class="p">],</span><span class="w">
  </span><span class="nl">"physical_utilisation"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"virtual_size"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"sharable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"read_write"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"description"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"name"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"uuid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"uuid"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"key"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>type <code>volume</code> = <code>struct { ... }</code></p>
<h4 id='task-type-definitions-volume-members'>Members</h4>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>key</td>
<td>string</td>
<td>A primary key for this volume. The key must be unique within the enclosing Storage Repository (SR). A typical value would be a filename or an LVM volume name.</td>
</tr>
<tr>
<td>uuid</td>
<td>string option</td>
<td>A uuid (or guid) for the volume, if one is available. If a storage system has a built-in notion of a guid, then it will be returned here.</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td>Short, human-readable label for the volume. Names are commonly used by when displaying short lists of volumes.</td>
</tr>
<tr>
<td>description</td>
<td>string</td>
<td>Longer, human-readable description of the volume. Descriptions are generally only displayed by clients when the user is examining volumes individually.</td>
</tr>
<tr>
<td>read_write</td>
<td>bool</td>
<td>True means the VDI may be written to, false means the volume is read-only. Some storage media is read-only so all volumes are read-only; for example .iso disk images on an NFS share. Some volume are created read-only; for example because they are snapshots of some other VDI.</td>
</tr>
<tr>
<td>sharable</td>
<td>bool</td>
<td>Indicates whether the VDI can be attached by multiple hosts at once. This is used for example by the HA statefile and XAPI redo log.</td>
</tr>
<tr>
<td>virtual_size</td>
<td>int64</td>
<td>Size of the volume from the perspective of a VM (in bytes)</td>
</tr>
<tr>
<td>physical_utilisation</td>
<td>int64</td>
<td>Amount of space currently used on the backing storage (in bytes)</td>
</tr>
<tr>
<td>uri</td>
<td>string list</td>
<td>A list of URIs which can be opened and by a datapath plugin for I/O. A URI could reference a local block device, a remote NFS share, iSCSI LUN or RBD volume. In cases where the data may be accessed over several protocols, the list should be sorted into descending order of desirability. Xapi will open the most desirable URI for which it has an available datapath plugin.</td>
</tr>
<tr>
<td>keys</td>
<td>(string * string) list</td>
<td>A list of key=value pairs which have been stored in the Volume metadata. These should not be interpreted by the Volume plugin.</td>
</tr>
</tbody></table>
<h3 id='task-type-definitions-async_result_t'>async_result_t</h3><div class="highlight"><pre class="highlight json tab-json"><code><span class="s2">"UnitResult"</span><span class="w">
</span><span class="p">[</span><span class="w">
  </span><span class="s2">"Volume"</span><span class="p">,</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"keys"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"keys"</span><span class="p">:</span><span class="w"> </span><span class="s2">"keys"</span><span class="w"> </span><span class="p">},</span><span class="w">
    </span><span class="nl">"uri"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">"uri"</span><span class="w"> </span><span class="p">],</span><span class="w">
    </span><span class="nl">"physical_utilisation"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"virtual_size"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="nl">"sharable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"read_write"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"description"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"name"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"uuid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"uuid"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"key"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div>
<p>type <code>async_result_t</code> = <code>variant { ... }</code></p>
<h4 id='task-type-definitions-async_result_t-constructors'>Constructors</h4>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>UnitResult</td>
<td>unit</td>
<td></td>
</tr>
<tr>
<td>Volume</td>
<td>volume</td>
<td></td>
</tr>
</tbody></table>
<h3 id='task-type-definitions-completion_t'>completion_t</h3><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w"> </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"UnitResult"</span><span class="p">,</span><span class="w"> </span><span class="nl">"duration"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="w"> </span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>type <code>completion_t</code> = <code>struct { ... }</code></p>
<h4 id='task-type-definitions-completion_t-members'>Members</h4>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>duration</td>
<td>float</td>
<td></td>
</tr>
<tr>
<td>result</td>
<td>async_result_t option</td>
<td></td>
</tr>
</tbody></table>
<h3 id='task-type-definitions-state'>state</h3><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w"> </span><span class="s2">"Pending"</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="w"> </span><span class="p">]</span><span class="w">
</span><span class="p">[</span><span class="w"> </span><span class="s2">"Completed"</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"result"</span><span class="p">:</span><span class="w"> </span><span class="s2">"UnitResult"</span><span class="p">,</span><span class="w"> </span><span class="nl">"duration"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">]</span><span class="w">
</span><span class="p">[</span><span class="w"> </span><span class="s2">"Failed"</span><span class="p">,</span><span class="w"> </span><span class="s2">"state"</span><span class="w"> </span><span class="p">]</span><span class="w">
</span></code></pre></div>
<p>type <code>state</code> = <code>variant { ... }</code></p>
<h4 id='task-type-definitions-state-constructors'>Constructors</h4>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>Pending</td>
<td>float</td>
<td>The task is in progress, with progress info from 0..1.</td>
</tr>
<tr>
<td>Completed</td>
<td>completion_t</td>
<td></td>
</tr>
<tr>
<td>Failed</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>
<h3 id='task-type-definitions-task'>task</h3><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">"Pending"</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="w"> </span><span class="p">],</span><span class="w">
  </span><span class="nl">"ctime"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"debug_info"</span><span class="p">:</span><span class="w"> </span><span class="s2">"debug_info"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"id"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div>
<p>type <code>task</code> = <code>struct { ... }</code></p>
<h4 id='task-type-definitions-task-members'>Members</h4>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>debug_info</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>ctime</td>
<td>float</td>
<td></td>
</tr>
<tr>
<td>state</td>
<td>state</td>
<td></td>
</tr>
</tbody></table>
<h3 id='task-type-definitions-task_list'>task_list</h3><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w"> </span><span class="s2">"task_list"</span><span class="w"> </span><span class="p">]</span><span class="w">
</span><span class="p">[]</span><span class="w">
</span></code></pre></div>
<p>type <code>task_list</code> = <code>string list</code></p>
<h2 id='task-interface-task'>Interface: <code>Task</code></h2>
<p>The task interface is for querying the status of asynchronous  tasks. All long-running operations are associated with tasks,  including copying and mirroring of data.</p>
<h2 id='task-method-stat'>Method: <code>stat</code></h2>
<p>[stat task_id] returns the status of the task</p>

<blockquote>
<p>Client</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Task.stat"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"params"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"id"</span><span class="p">,</span><span class="w"> </span><span class="nl">"dbg"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dbg"</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">],</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">43</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><div class="highlight"><pre class="highlight ocaml tab-ocaml"><code><span class="k">try</span>
    <span class="k">let</span> <span class="n">result</span> <span class="o">=</span> <span class="nn">Client</span><span class="p">.</span><span class="n">stat</span> <span class="n">dbg</span> <span class="n">id</span> <span class="k">in</span>
    <span class="o">...</span>
<span class="k">with</span> <span class="nc">Exn</span> <span class="p">(</span><span class="nc">Unimplemented</span> <span class="n">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="o">...</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code>
<span class="c1"># import necessary libraries if needed
# we assume that your library providing the client is called myclient and it provides a connect method
</span><span class="kn">import</span> <span class="nn">myclient</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">"__main__"</span><span class="p">:</span>
    <span class="n">c</span> <span class="o">=</span> <span class="n">myclient</span><span class="p">.</span><span class="n">connect</span><span class="p">()</span>
    <span class="n">results</span> <span class="o">=</span> <span class="n">c</span><span class="p">.</span><span class="n">Task</span><span class="p">.</span><span class="n">stat</span><span class="p">({</span> <span class="n">dbg</span><span class="p">:</span> <span class="s">"string"</span><span class="p">,</span> <span class="nb">id</span><span class="p">:</span> <span class="s">"string"</span> <span class="p">})</span>
    <span class="k">print</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">results</span><span class="p">))</span>
</code></pre></div>
<blockquote>
<p>Server</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="s2">"Pending"</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="w"> </span><span class="p">],</span><span class="w">
  </span><span class="nl">"ctime"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w">
  </span><span class="nl">"debug_info"</span><span class="p">:</span><span class="w"> </span><span class="s2">"debug_info"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"id"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><div class="highlight"><pre class="highlight ocaml tab-ocaml"><code><span class="k">try</span>
    <span class="k">let</span> <span class="n">result</span> <span class="o">=</span> <span class="nn">Client</span><span class="p">.</span><span class="n">stat</span> <span class="n">dbg</span> <span class="n">id</span> <span class="k">in</span>
    <span class="o">...</span>
<span class="k">with</span> <span class="nc">Exn</span> <span class="p">(</span><span class="nc">Unimplemented</span> <span class="n">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="o">...</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code>
<span class="c1"># import additional libraries if needed
</span>
<span class="k">class</span> <span class="nc">Task_myimplementation</span><span class="p">(</span><span class="n">Task_skeleton</span><span class="p">):</span>
    <span class="c1"># by default each method will return a Not_implemented error
</span>    <span class="c1"># ...
</span>
    <span class="k">def</span> <span class="nf">stat</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dbg</span><span class="p">,</span> <span class="nb">id</span><span class="p">):</span>
        <span class="s">"""
        [stat task_id] returns the status of the task
        """</span>
        <span class="k">return</span> <span class="p">{</span><span class="s">"id"</span><span class="p">:</span> <span class="s">"string"</span><span class="p">,</span> <span class="s">"debug_info"</span><span class="p">:</span> <span class="s">"string"</span><span class="p">,</span> <span class="s">"ctime"</span><span class="p">:</span> <span class="mf">1.1</span><span class="p">,</span> <span class="s">"state"</span><span class="p">:</span> <span class="bp">None</span><span class="p">}</span>
    <span class="c1"># ...
</span></code></pre></div>
<table><thead>
<tr>
<th>Name</th>
<th>Direction</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>dbg</td>
<td>in</td>
<td>string</td>
<td>Debug context from the caller</td>
</tr>
<tr>
<td>id</td>
<td>in</td>
<td>id</td>
<td>Unique identifier for a task.</td>
</tr>
<tr>
<td>result</td>
<td>out</td>
<td>task</td>
<td></td>
</tr>
</tbody></table>
<h2 id='task-method-cancel'>Method: <code>cancel</code></h2>
<p>[cancel task_id] performs a best-effort cancellation of an ongoing  task. The effect of this should leave the system in one of two  states: Either that the task has completed successfully, or that it  had never been made at all. The call should return immediately and  the status of the task can the be queried via the [stat] call.</p>

<blockquote>
<p>Client</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Task.cancel"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"params"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"id"</span><span class="p">,</span><span class="w"> </span><span class="nl">"dbg"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dbg"</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">],</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">44</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><div class="highlight"><pre class="highlight ocaml tab-ocaml"><code><span class="k">try</span>
    <span class="k">let</span> <span class="bp">()</span> <span class="o">=</span> <span class="nn">Client</span><span class="p">.</span><span class="n">cancel</span> <span class="n">dbg</span> <span class="n">id</span> <span class="k">in</span>
    <span class="o">...</span>
<span class="k">with</span> <span class="nc">Exn</span> <span class="p">(</span><span class="nc">Unimplemented</span> <span class="n">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="o">...</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code>
<span class="c1"># import necessary libraries if needed
# we assume that your library providing the client is called myclient and it provides a connect method
</span><span class="kn">import</span> <span class="nn">myclient</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">"__main__"</span><span class="p">:</span>
    <span class="n">c</span> <span class="o">=</span> <span class="n">myclient</span><span class="p">.</span><span class="n">connect</span><span class="p">()</span>
    <span class="n">results</span> <span class="o">=</span> <span class="n">c</span><span class="p">.</span><span class="n">Task</span><span class="p">.</span><span class="n">cancel</span><span class="p">({</span> <span class="n">dbg</span><span class="p">:</span> <span class="s">"string"</span><span class="p">,</span> <span class="nb">id</span><span class="p">:</span> <span class="s">"string"</span> <span class="p">})</span>
    <span class="k">print</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">results</span><span class="p">))</span>
</code></pre></div>
<blockquote>
<p>Server</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="kc">null</span><span class="w">
</span></code></pre></div><div class="highlight"><pre class="highlight ocaml tab-ocaml"><code><span class="k">try</span>
    <span class="k">let</span> <span class="bp">()</span> <span class="o">=</span> <span class="nn">Client</span><span class="p">.</span><span class="n">cancel</span> <span class="n">dbg</span> <span class="n">id</span> <span class="k">in</span>
    <span class="o">...</span>
<span class="k">with</span> <span class="nc">Exn</span> <span class="p">(</span><span class="nc">Unimplemented</span> <span class="n">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="o">...</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code>
<span class="c1"># import additional libraries if needed
</span>
<span class="k">class</span> <span class="nc">Task_myimplementation</span><span class="p">(</span><span class="n">Task_skeleton</span><span class="p">):</span>
    <span class="c1"># by default each method will return a Not_implemented error
</span>    <span class="c1"># ...
</span>
    <span class="k">def</span> <span class="nf">cancel</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dbg</span><span class="p">,</span> <span class="nb">id</span><span class="p">):</span>
        <span class="s">"""
        [cancel task_id] performs a best-effort cancellation of an ongoing
        task. The effect of this should leave the system in one of two
        states: Either that the task has completed successfully, or that it
        had never been made at all. The call should return immediately and
        the status of the task can the be queried via the [stat] call.
        """</span>
    <span class="c1"># ...
</span></code></pre></div>
<table><thead>
<tr>
<th>Name</th>
<th>Direction</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>dbg</td>
<td>in</td>
<td>string</td>
<td>Debug context from the caller</td>
</tr>
<tr>
<td>id</td>
<td>in</td>
<td>id</td>
<td>Unique identifier for a task.</td>
</tr>
</tbody></table>
<h2 id='task-method-destroy'>Method: <code>destroy</code></h2>
<p>[destroy task_id] should remove all traces of the task_id. This call  should fail if the task is currently in progress.</p>

<blockquote>
<p>Client</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Task.destroy"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"params"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"id"</span><span class="p">,</span><span class="w"> </span><span class="nl">"dbg"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dbg"</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">],</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">45</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div><div class="highlight"><pre class="highlight ocaml tab-ocaml"><code><span class="k">try</span>
    <span class="k">let</span> <span class="bp">()</span> <span class="o">=</span> <span class="nn">Client</span><span class="p">.</span><span class="n">destroy</span> <span class="n">dbg</span> <span class="n">id</span> <span class="k">in</span>
    <span class="o">...</span>
<span class="k">with</span> <span class="nc">Exn</span> <span class="p">(</span><span class="nc">Unimplemented</span> <span class="n">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="o">...</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code>
<span class="c1"># import necessary libraries if needed
# we assume that your library providing the client is called myclient and it provides a connect method
</span><span class="kn">import</span> <span class="nn">myclient</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">"__main__"</span><span class="p">:</span>
    <span class="n">c</span> <span class="o">=</span> <span class="n">myclient</span><span class="p">.</span><span class="n">connect</span><span class="p">()</span>
    <span class="n">results</span> <span class="o">=</span> <span class="n">c</span><span class="p">.</span><span class="n">Task</span><span class="p">.</span><span class="n">destroy</span><span class="p">({</span> <span class="n">dbg</span><span class="p">:</span> <span class="s">"string"</span><span class="p">,</span> <span class="nb">id</span><span class="p">:</span> <span class="s">"string"</span> <span class="p">})</span>
    <span class="k">print</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">results</span><span class="p">))</span>
</code></pre></div>
<blockquote>
<p>Server</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="kc">null</span><span class="w">
</span></code></pre></div><div class="highlight"><pre class="highlight ocaml tab-ocaml"><code><span class="k">try</span>
    <span class="k">let</span> <span class="bp">()</span> <span class="o">=</span> <span class="nn">Client</span><span class="p">.</span><span class="n">destroy</span> <span class="n">dbg</span> <span class="n">id</span> <span class="k">in</span>
    <span class="o">...</span>
<span class="k">with</span> <span class="nc">Exn</span> <span class="p">(</span><span class="nc">Unimplemented</span> <span class="n">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="o">...</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code>
<span class="c1"># import additional libraries if needed
</span>
<span class="k">class</span> <span class="nc">Task_myimplementation</span><span class="p">(</span><span class="n">Task_skeleton</span><span class="p">):</span>
    <span class="c1"># by default each method will return a Not_implemented error
</span>    <span class="c1"># ...
</span>
    <span class="k">def</span> <span class="nf">destroy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dbg</span><span class="p">,</span> <span class="nb">id</span><span class="p">):</span>
        <span class="s">"""
        [destroy task_id] should remove all traces of the task_id. This call
        should fail if the task is currently in progress.
        """</span>
    <span class="c1"># ...
</span></code></pre></div>
<table><thead>
<tr>
<th>Name</th>
<th>Direction</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>dbg</td>
<td>in</td>
<td>string</td>
<td>Debug context from the caller</td>
</tr>
<tr>
<td>id</td>
<td>in</td>
<td>id</td>
<td>Unique identifier for a task.</td>
</tr>
</tbody></table>
<h2 id='task-method-ls'>Method: <code>ls</code></h2>
<p>[ls] should return a list of all of the tasks the plugin is aware of.</p>

<blockquote>
<p>Client</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">{</span><span class="w"> </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Task.ls"</span><span class="p">,</span><span class="w"> </span><span class="nl">"params"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"dbg"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dbg"</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">],</span><span class="w"> </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">46</span><span class="w"> </span><span class="p">}</span><span class="w">
</span></code></pre></div><div class="highlight"><pre class="highlight ocaml tab-ocaml"><code><span class="k">try</span>
    <span class="k">let</span> <span class="n">task_list</span> <span class="o">=</span> <span class="nn">Client</span><span class="p">.</span><span class="n">ls</span> <span class="n">dbg</span> <span class="k">in</span>
    <span class="o">...</span>
<span class="k">with</span> <span class="nc">Exn</span> <span class="p">(</span><span class="nc">Unimplemented</span> <span class="n">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="o">...</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code>
<span class="c1"># import necessary libraries if needed
# we assume that your library providing the client is called myclient and it provides a connect method
</span><span class="kn">import</span> <span class="nn">myclient</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">"__main__"</span><span class="p">:</span>
    <span class="n">c</span> <span class="o">=</span> <span class="n">myclient</span><span class="p">.</span><span class="n">connect</span><span class="p">()</span>
    <span class="n">results</span> <span class="o">=</span> <span class="n">c</span><span class="p">.</span><span class="n">Task</span><span class="p">.</span><span class="n">ls</span><span class="p">({</span> <span class="n">dbg</span><span class="p">:</span> <span class="s">"string"</span> <span class="p">})</span>
    <span class="k">print</span><span class="p">(</span><span class="nb">repr</span><span class="p">(</span><span class="n">results</span><span class="p">))</span>
</code></pre></div>
<blockquote>
<p>Server</p>
</blockquote>
<div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w"> </span><span class="s2">"task_list_1"</span><span class="p">,</span><span class="w"> </span><span class="s2">"task_list_2"</span><span class="w"> </span><span class="p">]</span><span class="w">
</span></code></pre></div><div class="highlight"><pre class="highlight ocaml tab-ocaml"><code><span class="k">try</span>
    <span class="k">let</span> <span class="n">task_list</span> <span class="o">=</span> <span class="nn">Client</span><span class="p">.</span><span class="n">ls</span> <span class="n">dbg</span> <span class="k">in</span>
    <span class="o">...</span>
<span class="k">with</span> <span class="nc">Exn</span> <span class="p">(</span><span class="nc">Unimplemented</span> <span class="n">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="o">...</span>

</code></pre></div><div class="highlight"><pre class="highlight python tab-python"><code>
<span class="c1"># import additional libraries if needed
</span>
<span class="k">class</span> <span class="nc">Task_myimplementation</span><span class="p">(</span><span class="n">Task_skeleton</span><span class="p">):</span>
    <span class="c1"># by default each method will return a Not_implemented error
</span>    <span class="c1"># ...
</span>
    <span class="k">def</span> <span class="nf">ls</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dbg</span><span class="p">):</span>
        <span class="s">"""
        [ls] should return a list of all of the tasks the plugin is aware of.
        """</span>
        <span class="k">return</span> <span class="p">[</span><span class="s">"string"</span><span class="p">]</span>
    <span class="c1"># ...
</span></code></pre></div>
<table><thead>
<tr>
<th>Name</th>
<th>Direction</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>dbg</td>
<td>in</td>
<td>string</td>
<td>Debug context from the caller</td>
</tr>
<tr>
<td>unnamed</td>
<td>out</td>
<td>task_list</td>
<td></td>
</tr>
</tbody></table>
<h2 id='task-errors'>Errors</h2><h3 id='task-errors-exnt'>exnt</h3><div class="highlight"><pre class="highlight json tab-json"><code><span class="p">[</span><span class="w"> </span><span class="s2">"Unimplemented"</span><span class="p">,</span><span class="w"> </span><span class="s2">"exnt"</span><span class="w"> </span><span class="p">]</span><span class="w">
</span></code></pre></div>
<p>type <code>exnt</code> = <code>variant { ... }</code></p>
<h4 id='task-errors-exnt-constructors'>Constructors</h4>
<table><thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>Unimplemented</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="json">json</a>
                <a href="#" data-language-name="ocaml">ocaml</a>
                <a href="#" data-language-name="python">python</a>
          </div>
      </div>
    </div>
  </body>
</html>
